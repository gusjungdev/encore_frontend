import"./Cart.vue.3bd5ef3d.js";import{a as f,o as d,b as _,e as t,F as g,r as v,t as n,f as b,p as y,k as x}from"./entry.e1848fba.js";import h from"./CallAPI.6c08a124.js";import u from"./Alert.49eb5f8b.js";import"./composables.9997b364.js";import"./axios.71f0d3ca.js";const k={data(){return{selected_all:!1,cart_item:[],cart_item_select:[],total_price:0,total_count:0,ImgEngpoint:"https://api.encorefashion.co/",page_language:"TH",login_data:{user_info:{fname:"",lname:"",email:"",mobile:"",consent:!1,address:[]},cart_data:[],order_history:[],favorite_item:[],login_status:!0}}},created(){},mounted(){console.log("component mounted : cart"),this.$bus.$on("addEvent",e=>{console.log("addEvent"),this.AddItem(e)}),this.$bus.$on("reloadCartEvent",e=>{this.CartList()}),this.$bus.$on("logoutEvent",e=>{this.cart_item=[],this.cart_item_select=[],this.total_price=0,this.total_count=0}),this.CartList()},updated(){console.log("component updated : cart")},beforeUnmount(){console.log("component unmount : cart"),this.$bus.$off("addEvent"),this.$bus.$off("reloadCartEvent"),this.$bus.$off("logoutEvent")},beforeUnmount(){},methods:{async CartList(){let e=sessionStorage.getItem("login_data");if(this.login_data=JSON.parse(e),this.login_data!=null){this.cart_item=[];try{const s=await h.methods.cartListApi(this.login_data.user_info.customerCode);if(s.data.status==200){let o=s.data.data;for(let i=0;i<o.length;i++)o[i].index=i,o[i].selected=!1,this.cart_item.push(o[i])}}catch{}}else{let s=sessionStorage.getItem("cart_items");if(s!=null){let o=JSON.parse(s);this.cart_item=o}}this.CartUpdate()},async AddItem(e){console.log("add item");let s=sessionStorage.getItem("login_data");if(s!=null){console.log("login status : true"),this.login_data=JSON.parse(s);let o={customerCode:this.login_data.user_info.customerCode,stockID:e.stockID};try{const i=await h.methods.AddCartApi(o);if(console.log(i),i.data.status==200){let l={msg:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27",type:"success"};this.$bus.$emit("alertEvent",l),this.CartList()}}catch(i){i.response.status==400?u.methods.warningAlert("\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E25\u0E07\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E41\u0E25\u0E49\u0E27<br>\u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E40\u0E14\u0E35\u0E22\u0E27\u0E01\u0E31\u0E19\u0E44\u0E14\u0E49\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19 1 \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"):u.methods.warningAlert("\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E44\u0E14\u0E49<br>\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07")}}else console.log("login status : false"),console.log(this.cart_item.length),e.index=this.cart_item.length,e.selected=!1,this.cart_item.push(e),this.CartUpdate()},async RemoveItem(e){let s=sessionStorage.getItem("login_data");this.login_data=JSON.parse(s),this.login_data!=null?(await h.methods.DeleteCartApi(e.cartID)).data.status==200&&this.CartList():(e.length>1?this.cart_item.splice(e.index,1):this.cart_item.pop(),this.CartUpdate());let o={msg:"\u0E25\u0E1A\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27",type:"success"};this.$bus.$emit("alertEvent",o)},UpdateCount(e,s){s=="increase"?this.cart_item[e.index].count++:e.count>1&&this.cart_item[e.index].count--,this.CartUpdate(),this.CalPriceTotal()},UpdateChecked(e){e.selected==!1?this.cart_item[e.index].selected=!0:this.cart_item[e.index].selected=!1;let s=!0,o=!0;for(let i=0;i<this.cart_item.length;i++)this.cart_item[i].selected==!1&&(s=!1),i==this.cart_item.length-1&&(o=s);o?this.selected_all=!0:this.selected_all=!1,this.CalPriceTotal()},SelectAll(){this.selected_all?this.selected_all=!1:this.selected_all=!0;for(let e=0;e<this.cart_item.length;e++)this.cart_item[e].selected=this.selected_all;this.CalPriceTotal()},UpdateFavorite(e){e.favorite==!1?this.cart_item[e.index].favorite=!0:this.cart_item[e.index].favorite=!1,this.CartUpdate()},CalPriceTotal(){let e=0,s=0;this.cart_item_select=[];for(let o=0;o<this.cart_item.length;o++)this.cart_item[o].selected&&(e+=this.cart_item[o].price*1,s+=1,this.cart_item_select.push(this.cart_item[o]));this.total_price=e,this.total_count=s},async CartUpdate(){sessionStorage.setItem("cart_items",JSON.stringify(this.cart_item));let e=sessionStorage.getItem("cart_items");if(e!=null){let s=JSON.parse(e);this.cart_item=s}this.CalPriceTotal(),this.$bus.$emit("navEvent","cart-update")},RouteNav(e){e=="summary"&&(console.log(this.cart_item_select),sessionStorage.setItem("summary_order_items",JSON.stringify(this.cart_item_select)),this.$router.push("/order-summary")),e=="product"&&this.$router.push("/product")},ReplaceComma(e){var s=String(e);try{var o=this.stringBefore(s,"."),i=this.stringAfter(s,".");i==null||i==null?s=s.replace(/(?!-)[^0-9.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","):(o=o.replace(/(?!-)[^0-9.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),s=o+"."+i)}catch(l){console.log(l)}return s},stringBefore(e,s){var o=e.split(s)[0];return o},stringAfter(e,s){var o=e.split(s)[1];return o}}},r=e=>(y("data-v-05eb2c2b"),e=e(),x(),e),C={class:"card"},w=r(()=>t("div",{class:"card-header text-center desktop-size",style:{height:"64px","background-color":"white"}},[t("div",{class:"row align-items-center g-0",style:{height:"100%"}},[t("span",{style:{"font-size":"18px"}},"\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32")])],-1)),S={class:"card-body p-0"},I={class:"list-group list-group-flush"},N={class:"row g-0"},A={class:"col-1",style:{}},E={class:"row align-items-center g-0",style:{height:"100%"}},U=["onClick","checked"],$={class:"col-11",style:{}},L={class:"row g-0"},R={class:"col-4"},j=["src"],B={class:"col-5",style:{}},z={class:"row g-0"},D={class:"col-12 d-flex align-items-center justify-content-start pb-2"},J={class:"fs-14 fw-400 float-start"},O={class:"col-12 d-flex align-items-center justify-content-start pb-2"},P={class:"fs-13 fw-400"},T={class:"col-12 d-flex align-items-center justify-content-start pb-2"},F={class:"fs-12"},V=r(()=>t("div",{class:"col-12 d-flex align-items-center justify-content-start pb-2"},[t("span",{class:"fs-14 fw-400"},"x 1")],-1)),H={class:"col-3"},q={class:"row g-0",style:{height:"50%"}},G={class:"col-12",style:{}},K={class:"d-flex justify-content-end"},M={style:{"font-size":"14px",color:"#2D9CDB"}},Q=r(()=>t("br",null,null,-1)),W={key:0,style:{"font-size":"12px","text-decoration-line":"line-through",color:"#828282",position:"absolute",top:"40px"}},X={class:"row align-items-end g-0",style:{height:"50%"}},Y={class:"d-flex justify-content-end",style:{"padding-bottom":"6px"}},Z=["onClick"],tt={class:"card-footer text-muted",style:{}},et={class:"row g-0 align-items-center desktop-size",style:{height:"100%"}},st={class:"col-5"},ot=["checked"],it=r(()=>t("label",{class:"form-check-label",for:"secondCheckbox",style:{color:"black"}},"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",-1)),lt={class:"col-7",style:{}},at={class:"row g-0"},ct={class:"col-5",style:{"padding-right":"10px"}},nt=r(()=>t("div",{class:"row g-0 text-end"},[t("span",{class:"fs-14 fw-400",style:{color:"black"}},"\u0E23\u0E27\u0E21\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 :")],-1)),rt={class:"row g-0 text-end"},dt={class:"fs-16 fw-500",style:{color:"black"}},_t={class:"col-7"},ht={class:"row align-items-end g-0",style:{height:"100%"}},ut=["disabled"],pt={style:{"font-size":"16px"}},mt={class:"row g-0 align-items-center mobile-size",style:{height:"100%"}},ft={class:"col-6 d-flex justify-content-start pt-2 pb-1"},gt=r(()=>t("label",{class:"form-check-label cl-black fs-14 ps-1",for:"secondCheckbox"},"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",-1)),vt={class:"col-6 d-flex justify-content-end pt-2 pb-1"},bt=r(()=>t("span",{class:"fs-12 fw-400 cl-black",style:{"margin-top":"2px"}},"\u0E23\u0E27\u0E21\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 :",-1)),yt={class:"fs-14 fw-500 cl-black"},xt={class:"col-12 d-flex justify-content-start align-items-center pt-2 pb-2"},kt=["disabled"],Ct={class:"kanit-font fs-16 fw-400"};function wt(e,s,o,i,l,c){return d(),_("div",C,[w,t("div",S,[t("ul",I,[(d(!0),_(g,null,v(l.cart_item,(a,p)=>(d(),_("li",{key:p,class:"list-group-item",style:{padding:"18px"}},[t("div",N,[t("div",A,[t("div",E,[t("input",{class:"form-check-input",type:"checkbox",id:"checkboxNoLabel",value:"","aria-label":"...",onClick:m=>c.UpdateChecked(a),checked:a.selected},null,8,U)])]),t("div",$,[t("div",L,[t("div",R,[t("img",{src:l.ImgEngpoint+a.product_PicCover,alt:"...",style:{width:"87px"}},null,8,j)]),t("div",B,[t("div",z,[t("div",D,[t("span",J,n(a["product_Name"+l.page_language]),1)]),t("div",O,[t("span",P,"Brand : "+n(a["brand_name"+l.page_language]),1)]),t("div",T,[t("span",F,"("+n(a.size)+" / "+n(a["color_"+l.page_language.toLocaleLowerCase()])+")",1)]),V])]),t("div",H,[t("div",q,[t("div",G,[t("div",K,[t("span",M,"\u0E3F"+n(c.ReplaceComma(a.price)),1),Q,a.discount?(d(),_("span",W,"\u0E3F"+n(c.ReplaceComma(a.base_price)),1)):b("",!0)])])]),t("div",X,[t("div",Y,[t("i",{class:"bi bi-trash mouse-pointer",onClick:m=>c.RemoveItem(a)},null,8,Z)])])])])])])]))),128))])]),t("div",tt,[t("div",et,[t("div",st,[t("input",{class:"form-check-input me-1",type:"checkbox",value:"",id:"secondCheckbox",onClick:s[0]||(s[0]=a=>c.SelectAll()),checked:l.selected_all},null,8,ot),it]),t("div",lt,[t("div",at,[t("div",ct,[nt,t("div",rt,[t("span",dt,"\u0E3F\xA0"+n(c.ReplaceComma(l.total_price)),1)])]),t("div",_t,[t("div",ht,[t("button",{type:"button",class:"btn btn-dark",disabled:!(l.total_count>0),style:{width:"130px",height:"44px"},onClick:s[1]||(s[1]=a=>c.RouteNav("summary"))},[t("span",pt,"\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19("+n(l.total_count)+")",1)],8,ut)])])])])]),t("div",mt,[t("div",ft,[t("input",{class:"form-check-input me-1",type:"checkbox",value:"",id:"secondCheckbox",onClick:s[2]||(s[2]=a=>c.SelectAll())}),gt]),t("div",vt,[bt,t("span",yt,"\u0E3F\xA0"+n(l.total_price),1)]),t("div",xt,[t("span",{class:"fs-14 fw-400 text-underline cl-black",onClick:s[3]||(s[3]=a=>c.RouteNav("product"))},"\u0E0A\u0E49\u0E2D\u0E1B\u0E1B\u0E34\u0E49\u0E07\u0E15\u0E48\u0E2D"),t("button",{type:"button",class:"btn btn-dark no-radius",disabled:!(l.total_count>0),style:{width:"80%",height:"44px","margin-left":"auto"},onClick:s[4]||(s[4]=a=>c.RouteNav("summary"))},[t("span",Ct,"\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19 ("+n(l.total_count)+")",1)],8,kt)])])])])}const $t=f(k,[["render",wt],["__scopeId","data-v-05eb2c2b"]]);export{$t as default};
