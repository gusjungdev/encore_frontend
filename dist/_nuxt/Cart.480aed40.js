import"./Cart.vue.65e5df8a.js";import{a as f,o as d,b as _,e as t,F as g,r as m,t as n,f as v,p as b,k as y}from"./entry.1af96281.js";import h from"./CallAPI.5d19bc28.js";import"./composables.6ff7ace0.js";import"./axios.71f0d3ca.js";const x={data(){return{selected_all:!1,cart_item:[],cart_item_select:[],total_price:0,total_count:0,ImgEngpoint:"https://api.encorefashion.co/",page_language:"TH",login_data:{user_info:{fname:"",lname:"",email:"",mobile:"",consent:!1,address:[]},cart_data:[],order_history:[],favorite_item:[],login_status:!0}}},created(){},mounted(){console.log("component mounted : cart"),this.$bus.$on("addEvent",e=>{console.log("addEvent");let s={msg:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27",type:"success"};this.$bus.$emit("alertEvent",s),this.AddItem(e)}),this.$bus.$on("reloadCartEvent",e=>{this.CartList()}),this.$bus.$on("logoutEvent",e=>{this.cart_item=[],this.cart_item_select=[],this.total_price=0,this.total_count=0}),this.CartList()},updated(){console.log("component updated : cart")},beforeUnmount(){console.log("component unmount : cart"),this.$bus.$off("addEvent"),this.$bus.$off("reloadCartEvent"),this.$bus.$off("logoutEvent")},beforeUnmount(){},methods:{async CartList(){let e=sessionStorage.getItem("login_data");if(this.login_data=JSON.parse(e),this.login_data!=null){this.cart_item=[];try{const s=await h.methods.cartListApi(this.login_data.user_info.customerCode);if(s.data.status==200){let o=s.data.data;for(let i=0;i<o.length;i++)o[i].index=i,o[i].selected=!1,this.cart_item.push(o[i])}}catch{}}else{let s=sessionStorage.getItem("cart_items");if(s!=null){let o=JSON.parse(s);this.cart_item=o}}this.CartUpdate()},async AddItem(e){console.log("add item");let s=sessionStorage.getItem("login_data");if(s!=null){console.log("login status : true"),this.login_data=JSON.parse(s);let o={customerCode:this.login_data.user_info.customerCode,stockID:e.stockID};const i=await h.methods.AddCartApi(o);if(console.log(i),i.data.status==200)try{this.CartList()}catch(l){console.log(l)}}else console.log("login status : false"),console.log(this.cart_item.length),e.index=this.cart_item.length,e.selected=!1,this.cart_item.push(e),this.CartUpdate()},async RemoveItem(e){let s=sessionStorage.getItem("login_data");this.login_data=JSON.parse(s),this.login_data!=null?(await h.methods.DeleteCartApi(e.cartID)).data.status==200&&this.CartList():(e.length>1?this.cart_item.splice(e.index,1):this.cart_item.pop(),this.CartUpdate());let o={msg:"\u0E25\u0E1A\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27",type:"success"};this.$bus.$emit("alertEvent",o)},UpdateCount(e,s){s=="increase"?this.cart_item[e.index].count++:e.count>1&&this.cart_item[e.index].count--,this.CartUpdate(),this.CalPriceTotal()},UpdateChecked(e){e.selected==!1?this.cart_item[e.index].selected=!0:this.cart_item[e.index].selected=!1;let s=!0,o=!0;for(let i=0;i<this.cart_item.length;i++)this.cart_item[i].selected==!1&&(s=!1),i==this.cart_item.length-1&&(o=s);o?this.selected_all=!0:this.selected_all=!1,this.CalPriceTotal()},SelectAll(){this.selected_all?this.selected_all=!1:this.selected_all=!0;for(let e=0;e<this.cart_item.length;e++)this.cart_item[e].selected=this.selected_all;this.CalPriceTotal()},UpdateFavorite(e){e.favorite==!1?this.cart_item[e.index].favorite=!0:this.cart_item[e.index].favorite=!1,this.CartUpdate()},CalPriceTotal(){let e=0,s=0;this.cart_item_select=[];for(let o=0;o<this.cart_item.length;o++)this.cart_item[o].selected&&(e+=this.cart_item[o].price*1,s+=1,this.cart_item_select.push(this.cart_item[o]));this.total_price=e,this.total_count=s},async CartUpdate(){sessionStorage.setItem("cart_items",JSON.stringify(this.cart_item));let e=sessionStorage.getItem("cart_items");if(e!=null){let s=JSON.parse(e);this.cart_item=s}this.CalPriceTotal(),this.$bus.$emit("navEvent","cart-update")},RouteNav(e){e=="summary"&&(console.log(this.cart_item_select),sessionStorage.setItem("summary_order_items",JSON.stringify(this.cart_item_select)),this.$router.push("/order-summary")),e=="product"&&this.$router.push("/product")},ReplaceComma(e){var s=String(e);try{var o=this.stringBefore(s,"."),i=this.stringAfter(s,".");i==null||i==null?s=s.replace(/(?!-)[^0-9.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","):(o=o.replace(/(?!-)[^0-9.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),s=o+"."+i)}catch(l){console.log(l)}return s},stringBefore(e,s){var o=e.split(s)[0];return o},stringAfter(e,s){var o=e.split(s)[1];return o}}},r=e=>(b("data-v-df8e3f3b"),e=e(),y(),e),k={class:"card"},C=r(()=>t("div",{class:"card-header text-center desktop-size",style:{height:"64px","background-color":"white"}},[t("div",{class:"row align-items-center g-0",style:{height:"100%"}},[t("span",{style:{"font-size":"18px"}},"\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32")])],-1)),w={class:"card-body p-0"},S={class:"list-group list-group-flush"},I={class:"row g-0"},N={class:"col-1",style:{}},E={class:"row align-items-center g-0",style:{height:"100%"}},U=["onClick","checked"],A={class:"col-11",style:{}},L={class:"row g-0"},R={class:"col-4"},$=["src"],j={class:"col-5",style:{}},B={class:"row g-0"},z={class:"col-12 d-flex align-items-center justify-content-start pb-2"},D={class:"fs-14 fw-400 float-start"},J={class:"col-12 d-flex align-items-center justify-content-start pb-2"},O={class:"fs-13 fw-400"},P={class:"col-12 d-flex align-items-center justify-content-start pb-2"},T={class:"fs-12"},F=r(()=>t("div",{class:"col-12 d-flex align-items-center justify-content-start pb-2"},[t("span",{class:"fs-14 fw-400"},"x 1")],-1)),V={class:"col-3"},H={class:"row g-0",style:{height:"50%"}},q={class:"col-12",style:{}},G={class:"d-flex justify-content-end"},K={style:{"font-size":"14px",color:"#2D9CDB"}},M=r(()=>t("br",null,null,-1)),Q={key:0,style:{"font-size":"12px","text-decoration-line":"line-through",color:"#828282",position:"absolute",top:"40px"}},W={class:"row align-items-end g-0",style:{height:"50%"}},X={class:"d-flex justify-content-end",style:{"padding-bottom":"6px"}},Y=["onClick"],Z={class:"card-footer text-muted",style:{}},tt={class:"row g-0 align-items-center desktop-size",style:{height:"100%"}},et={class:"col-5"},st=["checked"],ot=r(()=>t("label",{class:"form-check-label",for:"secondCheckbox",style:{color:"black"}},"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",-1)),it={class:"col-7",style:{}},lt={class:"row g-0"},at={class:"col-5",style:{"padding-right":"10px"}},ct=r(()=>t("div",{class:"row g-0 text-end"},[t("span",{class:"fs-14 fw-400",style:{color:"black"}},"\u0E23\u0E27\u0E21\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 :")],-1)),nt={class:"row g-0 text-end"},rt={class:"fs-16 fw-500",style:{color:"black"}},dt={class:"col-7"},_t={class:"row align-items-end g-0",style:{height:"100%"}},ht=["disabled"],ut={style:{"font-size":"16px"}},pt={class:"row g-0 align-items-center mobile-size",style:{height:"100%"}},ft={class:"col-6 d-flex justify-content-start pt-2 pb-1"},gt=r(()=>t("label",{class:"form-check-label cl-black fs-14 ps-1",for:"secondCheckbox"},"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",-1)),mt={class:"col-6 d-flex justify-content-end pt-2 pb-1"},vt=r(()=>t("span",{class:"fs-12 fw-400 cl-black",style:{"margin-top":"2px"}},"\u0E23\u0E27\u0E21\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 :",-1)),bt={class:"fs-14 fw-500 cl-black"},yt={class:"col-12 d-flex justify-content-start align-items-center pt-2 pb-2"},xt=["disabled"],kt={class:"kanit-font fs-16 fw-400"};function Ct(e,s,o,i,l,c){return d(),_("div",k,[C,t("div",w,[t("ul",S,[(d(!0),_(g,null,m(l.cart_item,(a,u)=>(d(),_("li",{key:u,class:"list-group-item",style:{padding:"18px"}},[t("div",I,[t("div",N,[t("div",E,[t("input",{class:"form-check-input",type:"checkbox",id:"checkboxNoLabel",value:"","aria-label":"...",onClick:p=>c.UpdateChecked(a),checked:a.selected},null,8,U)])]),t("div",A,[t("div",L,[t("div",R,[t("img",{src:l.ImgEngpoint+a.product_PicCover,alt:"...",style:{width:"87px"}},null,8,$)]),t("div",j,[t("div",B,[t("div",z,[t("span",D,n(a["product_Name"+l.page_language]),1)]),t("div",J,[t("span",O,"Brand : "+n(a["brand_name"+l.page_language]),1)]),t("div",P,[t("span",T,"("+n(a.size)+" / "+n(a["color_"+l.page_language.toLocaleLowerCase()])+")",1)]),F])]),t("div",V,[t("div",H,[t("div",q,[t("div",G,[t("span",K,"\u0E3F"+n(c.ReplaceComma(a.price)),1),M,a.discount?(d(),_("span",Q,"\u0E3F"+n(c.ReplaceComma(a.base_price)),1)):v("",!0)])])]),t("div",W,[t("div",X,[t("i",{class:"bi bi-trash mouse-pointer",onClick:p=>c.RemoveItem(a)},null,8,Y)])])])])])])]))),128))])]),t("div",Z,[t("div",tt,[t("div",et,[t("input",{class:"form-check-input me-1",type:"checkbox",value:"",id:"secondCheckbox",onClick:s[0]||(s[0]=a=>c.SelectAll()),checked:l.selected_all},null,8,st),ot]),t("div",it,[t("div",lt,[t("div",at,[ct,t("div",nt,[t("span",rt,"\u0E3F\xA0"+n(c.ReplaceComma(l.total_price)),1)])]),t("div",dt,[t("div",_t,[t("button",{type:"button",class:"btn btn-dark",disabled:!(l.total_count>0),style:{width:"130px",height:"44px"},onClick:s[1]||(s[1]=a=>c.RouteNav("summary"))},[t("span",ut,"\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19("+n(l.total_count)+")",1)],8,ht)])])])])]),t("div",pt,[t("div",ft,[t("input",{class:"form-check-input me-1",type:"checkbox",value:"",id:"secondCheckbox",onClick:s[2]||(s[2]=a=>c.SelectAll())}),gt]),t("div",mt,[vt,t("span",bt,"\u0E3F\xA0"+n(l.total_price),1)]),t("div",yt,[t("span",{class:"fs-14 fw-400 text-underline cl-black",onClick:s[3]||(s[3]=a=>c.RouteNav("product"))},"\u0E0A\u0E49\u0E2D\u0E1B\u0E1B\u0E34\u0E49\u0E07\u0E15\u0E48\u0E2D"),t("button",{type:"button",class:"btn btn-dark no-radius",disabled:!(l.total_count>0),style:{width:"80%",height:"44px","margin-left":"auto"},onClick:s[4]||(s[4]=a=>c.RouteNav("summary"))},[t("span",kt,"\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19 ("+n(l.total_count)+")",1)],8,xt)])])])])}const Ut=f(x,[["render",Ct],["__scopeId","data-v-df8e3f3b"]]);export{Ut as default};
